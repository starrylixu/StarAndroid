# ğŸ€ã€Androidã€‘8.0ç½‘ç»œè¯·æ±‚æ•°æ®ä¸JSONè§£æ
![](https://cdn.nlark.com/yuque/0/2023/jpeg/32682386/1693380478893-d8638b03-2a13-4c37-b569-2fb18591ca65.jpeg)
ç½‘ç»œè¯·æ±‚æ˜¯ Androidå¼€å‘ä¸­å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ï¼Œå‡ ä¹æ˜¯ä¸ªappéƒ½éœ€è¦è¯·æ±‚ç½‘ç»œè·å–æ•°æ®ã€‚é‚£ä¹ˆå®ç°ç½‘ç»œè¯·æ±‚çš„æ–¹å¼æ˜¯å¦‚ä½•çš„å‘¢ï¼Ÿä»¥åŠç½‘ç»œè¯·æ±‚çš„ä¸»æµæ–¹å¼æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ
é¦–å…ˆæ¥çœ‹çœ‹æ¯”è¾ƒåŸå§‹çš„ä¸€ç§ç½‘ç»œè¯·æ±‚æ–¹å¼å§ï¼
# ç½‘ç»œè¯·æ±‚æƒé™
åœ¨Androidåº”ç”¨å¼€å‘ä¸­ï¼Œæœ‰ä¸¥æ ¼çš„æƒé™æŠŠæ§ï¼Œæ—¢ç„¶éœ€è¦è®¿é—®ç½‘ç»œè‡ªç„¶éœ€è¦**ç½‘ç»œè¯·æ±‚æƒé™**
```java
<uses-permission android:name="android.permission.INTERNET"/>
```
é™¤æ­¤ä¹‹å¤–è¿˜éœ€è¦åŠ ä¸Šè¿™ä¸€è¡Œï¼Œå¦åˆ™httpçš„ç½‘é¡µè¯·æ±‚ä¸æˆåŠŸ
```java
android:usesCleartextTraffic="true"
```
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429173308.png#id=icaxR&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
# ç½‘ç»œè¯·æ±‚
## ç½‘ç»œåœ¨ä¸»çº¿ç¨‹å¼‚å¸¸
è¿™æ®µä»£ç æ˜¯ç½‘ç»œè¯·æ±‚æ•°æ®ï¼Œhttp://121.4.44.56/userï¼ˆç›®å‰è¿™ä¸ªé“¾æ¥å·²å¤±æ•ˆï¼Œä½†å¹¶ä¸å½±å“ç†è§£æ–‡ç« ï¼‰è¿™æ˜¯è€å¸ˆæå‰å‘åœ¨ç½‘ä¸Šçš„æ•°æ®æ–‡ä»¶ï¼Œå¯é€šè¿‡è¿™ä¸ªç½‘å€è®¿é—®ï¼Œå…¶ä¸­çš„æ•°æ®æ˜¯ï¼š
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429174240.png#id=t8MPz&originHeight=152&originWidth=524&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
```java
try {
    URL url = new URL("http://121.4.44.56/user");
    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
    urlConnection.setRequestMethod("GET");

    InputStream inputStream = urlConnection.getInputStream();// å­—èŠ‚æµ
    Reader reader = new InputStreamReader(inputStream);//å­—ç¬¦æµ
    BufferedReader bufferedReader = new BufferedReader(reader);// ç¼“å­˜æµ
    String result = "";
    String temp;
    while ((temp = bufferedReader.readLine()) != null) {
        result += temp;
    }
    Log.i("MainActivity", result);
    inputStream.close();
    reader.close();
    bufferedReader.close();
} catch (Exception e) {
    e.printStackTrace();
}
```
å°†è¿™æ®µä»£ç æ”¾åœ¨ä¸»çº¿ç¨‹ä¸‹æ‰§è¡Œä¼šå‡ºç°`è­¦å‘Šwarn`
```java
W/System.err: android.os.NetworkOnMainThreadException
```

è¿™æ˜¯å› ä¸ºåœ¨Androidä¸­ç½‘ç»œè¯·æ±‚ä¸èƒ½åœ¨ä¸»çº¿ç¨‹ï¼Œè€Œæˆ‘ä»¬çš„APPçš„ç”Ÿå‘½å‘¨æœŸä¸­æ‰§è¡Œçš„æ–¹æ³•é»˜è®¤æ˜¯ä¸»çº¿ç¨‹ï¼ˆUIçº¿ç¨‹ï¼‰ä¸èƒ½æ‰§è¡Œè€—æ—¶çš„æ“ä½œ
å¸¸è§çš„è€—æ—¶æ“ä½œæœ‰ï¼šè¯»å–æ–‡ä»¶ï¼ˆè¯»æ•°æ®åº“ï¼‰ã€ç½‘ç»œè¯·æ±‚
## å­çº¿ç¨‹ç½‘ç»œè¯·æ±‚
å› æ­¤æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹æ¥è®¿é—®ç½‘ç»œæ•°æ®ï¼Œå¹¶ä¸”åœ¨**å­çº¿ç¨‹ä¸­**å°†è·å–åˆ°çš„æ•°æ®æ˜¾ç¤ºåœ¨`TextView`æ§ä»¶ä¸Š
```java
Thread thread=new Thread(){
@Override
public void run() {
    //run()æ–¹æ³•æ‰§è¡Œçš„ä»£ç éƒ½æ˜¯åœ¨å­çº¿ç¨‹ä¸­
    super.run();

    //ç½‘ç»œè¯·æ±‚
    try {
        //è¯·æ±‚æœåŠ¡å™¨ç«¯
        URL url = new URL("http://121.4.44.56/user");
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");

        //è·å–ioè¾“å…¥å­—èŠ‚æµ->å­—ç¬¦æµ->ç¼“å­˜æµ
        InputStream inputStream = urlConnection.getInputStream();// å­—èŠ‚æµ
        Reader reader = new InputStreamReader(inputStream);//å­—ç¬¦æµ
        BufferedReader bufferedReader = new BufferedReader(reader);// ç¼“å­˜æµ

        String result = "";
        String temp;
        while ((temp = bufferedReader.readLine()) != null) {
        	result += temp;
   		}
        Log.i("MainActivity", result);
        //åœ¨å­çº¿ç¨‹ä¸­å°†è·å–åˆ°çš„æ•°æ®æ˜¾ç¤ºåœ¨`TextView`æ§ä»¶ä¸Š
        
        textView.setText(result);
        inputStream.close();
        reader.close();
        bufferedReader.close();
   		} catch (Exception e) {
    		e.printStackTrace();
    	}

    }

};
thread.start();
```
è¿è¡Œå‘ç°è™šæ‹Ÿæœºä¸Š**åªæ˜¾ç¤ºä¸€éƒ¨åˆ†æ•°æ®**ï¼ŒæŸ¥çœ‹æ—¥å¿—çª—å£å‘ç°ï¼š
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429143453.png#id=x3rZI&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
## çº¿ç¨‹åˆ‡æ¢
æ‰“å¼€logcatæ—¥å¿—å°ï¼Œå¯ä»¥çœ‹åˆ°æœ‰å¦‚ä¸‹è­¦å‘Šï¼š**åœ¨é”™è¯¯çš„çº¿ç¨‹ä¸­æ‰§è¡Œ**
```java
W/System.err: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
```
å‡ºç°è¿™ä¸ªè­¦å‘Šâš ï¸åŸå› ï¼š å¯¹äºUIæ§ä»¶çš„æ“ä½œä¸èƒ½æ”¾åœ¨å­çº¿ç¨‹ä¸­->éœ€è¦æ”¾åˆ°ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ->çº¿ç¨‹åˆ‡æ¢
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429143614.png#id=pi4wR&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
ä¸èƒ½ç›´æ¥åœ¨ä¸»çº¿ç¨‹ä¸­è®¾ç½®ï¼Œå› ä¸ºä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹æ˜¯ä¸€èµ·è¿è¡Œçš„ï¼Œå®ƒä»¬åœ¨è¿è¡Œæ—¶æ˜¯æ— æ³•äººä¸ºé¢„çŸ¥çš„
æˆ‘ä»¬éœ€è¦åœ¨å­çº¿ç¨‹ä¸­ç½‘ç»œè¯·æ±‚åˆ°æ•°æ®ï¼Œå†é€šè¿‡`**runOnUiThread(new Runnable()**`å®ç°çº¿ç¨‹åˆ‡æ¢å°†è¯·æ±‚åˆ°çš„å†…å®¹è®¾ç½®åˆ°`**TextView**`ä¸­
```java
String finalResult=result;
runOnUiThread(new Runnable() {
    @Override
    public void run() {
    textView.setText(finalResult);
    }
});
```
è¿™æ ·å°±èƒ½å®Œæˆçš„æ˜¾ç¤ºè¯·æ±‚åˆ°çš„æ•°æ®äº†
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429144035.png#id=nRwX1&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
# JSONæ•°æ®è§£æ
[JSON](https://baike.baidu.com/item/JSON)([JavaScript](https://baike.baidu.com/item/JavaScript) Object Notation, JS å¯¹è±¡ç®€è°±) æ˜¯ä¸€ç§**è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼**ã€‚å®ƒåŸºäº [ECMAScript](https://baike.baidu.com/item/ECMAScript) (æ¬§æ´²è®¡ç®—æœºåä¼šåˆ¶å®šçš„jsè§„èŒƒ)çš„ä¸€ä¸ªå­é›†ï¼Œé‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€çš„æ–‡æœ¬æ ¼å¼æ¥å­˜å‚¨å’Œè¡¨ç¤ºæ•°æ®ã€‚ç®€æ´å’Œæ¸…æ™°çš„å±‚æ¬¡ç»“æ„ä½¿å¾— JSON æˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢è¯­è¨€ã€‚ æ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆï¼Œå¹¶æœ‰æ•ˆåœ°æå‡ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚
é—®é¢˜ï¼šç½‘ç»œè¯·æ±‚æ˜¯è€—æ—¶çš„ï¼Œé‚£ä¹ˆå¦‚ä½•ä¸€æ¬¡è¯·æ±‚åˆ°æ‰€æœ‰çš„æ•°æ®å‘¢ï¼Ÿ
å¦‚å›¾ä¸€æ¬¡è¯·æ±‚åˆ°å¹´é¾„ï¼Œå§“åå’Œæ˜¯å¦æ˜¯å­¦ç”Ÿä¸‰ä¸ªæ•°æ®ï¼Œä½†æ˜¯æˆ‘ä»¬åªéœ€è¦å§“åï¼Œæˆ‘ä»¬å°±åªéœ€è¦é€šè¿‡JSONè§£æå­—ç¬¦ä¸²ï¼Œå†é€šè¿‡ é”®å Â è·å–åˆ°å§“å
## åŸºæœ¬ç±»å‹
`json`æ•°æ®ç»“æ„çš„ç‰¹ç‚¹ï¼š`"key":value`
```java
//jsonç»“æ„ "key":value { "age":30,"name":"å¼ ä¸‰", "isstudent":true }
//å¦‚ä½•ä»jsonç»“æ„ä¸­è§£æå‡ºæ•°æ®
```
```java
 try {
     //jsonè§£æå­—ç¬¦ä¸²
     JSONObject jsonObject=new JSONObject(finalResult);
     //é€šè¿‡ é”® è·å–åˆ° å€¼
     String name=jsonObject.getString("name");
     textView.setText(name);
     } catch (JSONException e) {
        e.printStackTrace();
     }
}
```
jsonå­—ç¬¦ä¸²çš„æ•°æ®ç»“æ„å¯ä»¥æ˜¯æµ®ç‚¹å‹ï¼Œæ•´å‹ï¼Œé•¿æ•´å‹ï¼Œå­—ç¬¦ä¸²å‹ï¼Œå¸ƒå°”å‹ ï¼Œæ•°ç»„ç±»å‹ï¼Œjosnç±»å‹ï¼Œclassç±»å‹ç­‰ç­‰
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429185825.png#id=xmuPG&originHeight=309&originWidth=769&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
## Jsonç±»å‹
jsonæ•°æ®ç»“æ„è¿˜å¯ä»¥æ˜¯jsonç±»å‹çš„ï¼Œè¿™ç§æƒ…å†µéœ€è¦åµŒå¥—è§£æï¼Œ`**http://121.4.44.56/object1**`æ–‡ä»¶é‡Œçš„å†…å®¹å¦‚ä¸‹ï¼š
```java
{ "age":20,
 "name":"å¼ ä¸‰", 
 "isstudent":true,
 "class":
 	{"grade":"18çº§",
     "classname":"è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯"
    }
}
```
åµŒå¥—è§£æå…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå¦‚æœå°±æ˜¯ä¸€å±‚JSONï¼Œé‚£ä¹ˆè§£æä¸€æ¬¡å°±å¯ä»¥æ‹¿åˆ°å€¼äº†ã€‚JSONä¸­çš„å€¼ç±»å‹ä¹Ÿæ˜¯JSONç±»å‹çš„ï¼Œé€šè¿‡â€œé”®æ‰¾å€¼â€çš„æ–¹å¼å†æ¬¡è§£æå³å¯ã€‚é‚£ä¹ˆå¦‚æœå‡ºç°äº†å¾ˆå¤æ‚çš„JSONæ•°æ®ï¼ŒåµŒå¥—äº†3ï¼Œ4å±‚ï¼Œé‚£ä¹ˆè§£æèµ·æ¥ä¹Ÿæ˜¯å¾ˆéº»çƒ¦çš„
```java
//jsonè§£æå­—ç¬¦ä¸²
JSONObject jsonObject=new JSONObject(finalResult);
//é¦–å…ˆè·å–åˆ°åµŒå¥—çš„jsonç±»å‹ï¼Œè¿™ä¹Ÿå¯ä»¥çœ‹åšé€šè¿‡ é”® æ‰¾ å€¼
//classæ˜¯é”®åï¼Œ{"grade":"18çº§","classname":"è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯"}æ˜¯å€¼
JSONObject classObj=jsonObject.getJSONObject("class");
//å†é€šè¿‡ é”® è·å–åˆ° å€¼
String className=classObj.getString("classname");
```

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429151433.png#id=xNHle&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

## æ•°ç»„ç±»å‹
jsonæ•°æ®ç»“æ„è¿˜å¯ä»¥æ˜¯**æ•°ç»„ç±»å‹**ï¼Œ`**http://121.4.44.56/object2**`æ–‡ä»¶é‡Œçš„å†…å®¹å¦‚ä¸‹ï¼š
```json
{ "grade":"18çº§",
  "classname":"è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯",
  "students":["å¼ ä¸‰","æå››","ç‹äº”"] 
}
```
è§£ææ•°ç»„ç±»å‹ï¼Œä½¿ç”¨äº†`**JSONArray**`**ç±»ï¼Œ**ç†è§£æˆä¸€ä¸ªæ™®é€šçš„æ•°ç»„å³å¯ï¼ŒæŒ‰ç…§ä¸‹æ ‡å–å€¼å°±å¯ä»¥æ‹¿åˆ°æ•°ç»„ä¸­çš„å…ƒç´ 
```java
JSONObject jsonObject=new JSONObject(finalResult);
//é€šè¿‡æ•°ç»„åè·å–åˆ°æ•°ç»„
JSONArray jsonArray= jsonObject.getJSONArray("students");
//éå†æ•°ç»„ï¼Œæ‰“å°æ—¥å¿—
for(int i=0;i<jsonArray.length();++i){
     String student=jsonArray.getString(i);//æ ¹æ®ä¸‹æ ‡è·å–
     Log.i("Students","student = "+student);
}
```
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429152218.png#id=jaVJB&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

## Jsonæ•°ç»„ç±»å‹
å†å¤æ‚ä¸€ä¸¢ä¸¢ï¼Œjsonæ•°ç»„ç±»å‹ï¼Œ`**http://121.4.44.56/object3**`æ–‡ä»¶é‡Œçš„å†…å®¹å¦‚ä¸‹ï¼š


```json
{ "grade":"20çº§","classname":"è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯",
"students":[
{ "id":"001","age":30,"name":"å¼ ä¸‰", "isstudent":false },
{ "id":"002","age":25,"name":"æå››111", "isstudent":true },
{ "id":"003","age":26,"name":"ç‹1111äº”", "isstudent":true }
]}
```
JSONæ•°ç»„ï¼š

- é¦–å…ˆå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æŒ‰ç…§æ•°ç»„çš„è§£ææ–¹å¼ï¼Œæ‹¿åˆ°è¿™ä¸ªæ•°ç»„
- å…¶æ¬¡æ•°ç»„ä¸­çš„æ¯ä¸ªä¸‹æ ‡éƒ½æ˜¯ä¸€ä¸ªJSONç±»å‹çš„å­—ç¬¦ä¸²ï¼ŒæŒ‰ç…§è§£æJSONçš„æ–¹å¼è§£æå³å¯

ä¸€ä¸‹å°±æ˜¯è§£æJSONæ•°ç»„ç±»å‹ï¼Œæ‹¿åˆ°æ•°ç»„ä¸­æ¯ä¸ªJSONå­—ç¬¦ä¸²ä¸­çš„`**name**`å’Œ`**age**`å­—æ®µ
```java
//é€šè¿‡æ•°ç»„åè·å–åˆ°æ•°ç»„
JSONArray jsonArray= jsonObject.getJSONArray("students");
//éå†æ•°ç»„ï¼Œæ‰“å°æ—¥å¿—
 for(int i=0;i<jsonArray.length();++i){
    //æ ¹æ®ä¸‹æ ‡è·å–æ¯ä¸€ä¸ªjsonæ•°æ®
 	JSONObject studentobj=jsonArray.getJSONObject(i);
    //é€šé”®åè·å–åˆ°æ¯ä¸€ä¸ªjsonæ•°æ®ä¸‹çš„å€¼
    String name=studentobj.getString("name");
    Integer age=studentobj.getInt("age");
    //æ‰“å°æ—¥å¿—
    Log.i("MainActivity","name = "+name+" age = "+age);
  }
```
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429153414.png#id=NXUC6&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
å­¦ä¹ è¦æ±‚ï¼šä¼šè§£æjsonæ•°æ®ç»“æ„ï¼Œä¼šæ„jsoné€ æ•°æ®ç»“æ„
ä¾‹å¦‚äº¬ä¸œåˆ—è¡¨ï¼š
```java
{"list":[{"name":iphone12,"price":6799},{"name":iphone12 plus,"price":7988},{},{}]}
```
å…¶å®è§£æJSONå­—ç¬¦ä¸²å°±æ˜¯æŒ‰ç…§å›ºå®šçš„æ–¹å¼ é”® æ‰¾ å€¼ï¼Œä¸è¿‡å¯èƒ½å€¼çš„ç±»å‹ä¸åŒè€Œå·²ï¼ŒåµŒå¥—çš„æ·±åº¦ä¸åŒè€Œå·²ã€‚
å¼€å‘äººå‘˜åº”å½“å…³æ³¨æ•°æ®å³å¯ï¼Œè€Œä¸åº”å½“ç½‘ç»œè¯·æ±‚æ‹¿åˆ°æ•°æ®ï¼Œè¿˜è¦å»åšå±‚å±‚è§£æï¼Œå°†JSONè½¬æ¢æˆå®ä½“å¯¹è±¡ã€‚å¹¶ä¸”JSONä¸­çš„åµŒå¥—å±‚æ•°å¤ªæ·±ä¹Ÿä¼šå¢åŠ å¼€å‘äººå‘˜è§£æçš„éš¾åº¦ã€‚å› æ­¤èªæ˜äº†å¼€å‘è€…å°†JSONè§£æä¹Ÿå°è£…æˆæ¡†æ¶ï¼Œä½¿ç”¨è¿™äº›æ¡†æ¶ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬å°†JSONå­—ç¬¦ä¸²è½¬æ¢æˆå®ä½“å¯¹è±¡ã€‚
# JSONè§£ææ¡†æ¶ GSON
[google/gsonï¼šä¸€ä¸ªJavaåºåˆ—åŒ–/ååºåˆ—åŒ–åº“ï¼Œç”¨äºå°†Java Objectsè½¬æ¢ä¸ºJSONå¹¶è¿”å› (github.com)](https://github.com/google/gson)

ä¼˜ç‚¹

1. ç›´æ¥å°†å­—ç¬¦ä¸²è§£ææˆå¯¹è±¡
2. è§£ææˆä¸ºä¸€ä¸ªå®ä½“ç±»
## æ·»åŠ GSONæ¡†æ¶ä¾èµ–

```java
implementation 'com.google.code.gson:gson:2.9.0'
```
## åˆ›å»ºå®ä½“ç±»
åˆ›å»ºç”¨æ¥æ¥æ”¶JSONå­—ç¬¦ä¸²çš„å®ä½“ç±»ï¼Œè¦æ±‚å®ä½“ç±»å­—æ®µçš„åç§°å’Œç±»å‹ä¸JSONå­—ç¬¦ä¸²ä¸¥æ ¼ä¸€è‡´
```json
{ "age":30,"name":"å¼ ä¸‰", "isstudent":true }
```
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429154517.png#id=G1HLa&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
## ä½¿ç”¨GSONæ¡†æ¶è§£æ
### æ™®é€šjsonæ•°æ®ç±»å‹ç±»
```java
//1.åˆ›å»ºä¸€ä¸ªGSONå¯¹è±¡
Gson gson=new Gson();
//2.fromJson()æ–¹æ³•è§£æjsonå­—ç¬¦ä¸²
//ä¸¤ä¸ªå‚æ•°å‰è€…æ˜¯ç½‘ç»œè¯·æ±‚åˆ°çš„jsonå­—ç¬¦ä¸²
//åè€…æ˜¯jsonå­—ç¬¦ä¸²å¯¹åº”çš„å®ä½“ç±»
Student student=gson.fromJson(finalResult,Student.class);
Log.i("MainActivity", "run: "+student.name);
```
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429155333.png#id=Hppwi&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
### åµŒå¥—jsonç±»å‹å®ä½“ç±»
å¦‚æœæ˜¯jsonç±»å‹åµŒå¥—å®ä½“ç±»ï¼Œé‚£ä¹ˆå®ä½“ç±»åº”è¯¥åšå¦‚ä¸‹ä¿®æ”¹ï¼š
```json
{ "age":20,"name":"å¼ ä¸‰", "isstudent":true,"class":{"grade":"18çº§","classname":"è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯"} }
```

Jsonæ•°æ®ç±»å‹å¯¹åº”javaçš„ç±»ï¼Œæ‰€ä»¥åµŒå¥—çš„Jsonç»“æ„ï¼Œæ”¹å†™æˆå®ä½“ç±»æ—¶ä¹Ÿæ˜¯**åµŒå¥—çš„ç±»ï¼ˆå†…éƒ¨ç±»ï¼‰**ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜è¦**å£°æ˜è¿™ä¸ªå†…éƒ¨ç±»**
å› ä¸ºè¿™é‡Œé”®åæ˜¯classä¸javaçš„å…³é”®å­—å†²çªï¼Œ**æ‰€ä»¥è¦æ³¨è§£"class"**ï¼Œç„¶åæ¢ä¸ªå˜é‡å
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429155602.png#id=iVrmE&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429155816.png#id=jRf13&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
åœ¨`MainActivity`çš„å­çº¿ç¨‹ä¸­è§£ææ•°æ®å¹¶æ‰“å°
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429160051.png#id=dHSaF&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
### jsonæ•°ç»„å®ä½“ç±»
é€šå¸¸ä½¿ç”¨javaé›†åˆç±»ä¸­çš„**Listå¯å˜æ•°ç»„**å®šä¹‰jsonæ•°æ®ç»“æ„ä¸­çš„æ•°ç»„
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429161020.png#id=yRNj8&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429160754.png#id=GUow2&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
## å®ä½“ç±»æ’ä»¶GsonFormatPlus(Javaç‰ˆ)
GSONæ¡†æ¶è™½ç„¶ç®€åŒ–äº†æˆ‘ä»¬è§£ææ•°æ®çš„è¿‡ç¨‹ï¼Œä½†æ˜¯éœ€è¦ä¹¦å†™ä¸€ä¸ªå®ä½“ç±»åˆç»™æˆ‘ä»¬æ·»åŠ äº†éº»çƒ¦ï¼Œå¤æ‚çš„JSONå­—ç¬¦ä¸²ï¼Œå¯èƒ½æœ‰è¿‘ç™¾ä¸ªé”®å€¼ï¼Œå¦‚æœæœ‰åµŒå¥—ï¼Œç¼–å†™å®ä½“ç±»æ›´åŠ å›°éš¾ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡å¦‚ä¸‹æ’ä»¶**ä¸€é”®ç”ŸæˆJsonæ•°æ®ç»“æ„**çš„å®ä½“ç±»
### å®‰è£…GsonFormatPlus

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429195001.png#id=uE9uU&originHeight=1021&originWidth=1472&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
### æ‰“å¼€GsonFormatPlus

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429195050.png#id=TYfr6&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

### è®¾ç½®GsonFormatPlus

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429161429.png#id=wTn3m&originHeight=1032&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)
### ä½¿ç”¨GsonFormatPlus
åœ¨å·¦ä¾§ç²˜è´´jsonæ•°æ®ç»“æ„çš„å­—ç¬¦ä¸²ï¼Œç„¶åokå³å¯
![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/img/20220429195204.png#id=ImPhs&originHeight=1040&originWidth=1480&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

## å®ä½“ç±»æ’ä»¶JSONToKotlinClass(kotlinç‰ˆ)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/32682386/1693379958936-63ac401c-97f9-4612-8c05-ab71fa803097.png#averageHue=%2342464b&clientId=ua74c690a-10a1-4&from=paste&height=354&id=ud9310f96&originHeight=708&originWidth=982&originalType=binary&ratio=2&rotation=0&showTitle=false&size=176673&status=done&style=none&taskId=u45e7327e-83a1-420d-a69c-c17d37a0610&title=&width=491)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/32682386/1693380033802-bfc93a18-1b32-4b73-9818-eae86aecd942.png#averageHue=%23484c51&clientId=ua74c690a-10a1-4&from=paste&height=333&id=u614fc767&originHeight=665&originWidth=580&originalType=binary&ratio=2&rotation=0&showTitle=false&size=140669&status=done&style=none&taskId=u0685e065-42a2-46bd-b5de-0ec144b1877&title=&width=290)
