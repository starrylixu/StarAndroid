> ğŸ‘¨â€ğŸ“ä½œè€…ç®€ä»‹ï¼šä¸€ä½å–œæ¬¢å†™ä½œï¼Œè®¡ç§‘ä¸“ä¸šå¤§ä¸‰èœé¸Ÿ
>  
> ğŸ¡ä¸ªäººä¸»é¡µï¼š[starryé™†ç¦»](https://ahoy-starry.blog.csdn.net)
>  
> å¦‚æœæ–‡ç« æœ‰å¸®åˆ°ä½ çš„è¯è®°å¾—ç‚¹èµğŸ‘+æ”¶è—ğŸ’—æ”¯æŒä¸€ä¸‹å“¦


# 1.collapseå¯æŠ˜å æ ‡é¢˜æ 
å¯æŠ˜å æ ‡é¢˜æ éœ€è¦å€ŸåŠ©**CollapsingToolbarLayout**è¿™ä¸ªå·¥å…·ã€‚
CollapsingToolbarLayoutæ˜¯ä¸€ä¸ªä½œç”¨äºToolbaråŸºç¡€ä¹‹ä¸Šçš„å¸ƒå±€ï¼Œç”±DesignSupportåº“æä¾›ã€‚
**éœ€è¦æ³¨æ„çš„æ˜¯ï¼š**

- CollapsingToolbarLayoutä¸èƒ½ç‹¬ç«‹å­˜åœ¨
- å®ƒåœ¨è®¾è®¡çš„æ—¶å€™å°±è¢«é™å®šåªèƒ½ä½œä¸ºAppBarLayoutçš„ç›´æ¥å­å¸ƒå±€æ¥ä½¿ç”¨ã€‚
- è€ŒAppBarLayoutåˆå¿…é¡»æ˜¯CoordinatorLayoutçš„å­å¸ƒå±€ï¼›

å› æ­¤å¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸ªå›¾ç›´è§‚çš„äº†è§£ä»–ä»¬çš„å±‚çº§å…³ç³»ã€‚

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/202210141832964.png#id=LZBW6&originHeight=599&originWidth=1076&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 2.å¸ƒå±€è®¾è®¡

å¸ƒå±€çš„è®¾è®¡åˆ†ä¸º

- æ ‡é¢˜éƒ¨åˆ†
- å†…å®¹éƒ¨åˆ†

## æ ‡é¢˜éƒ¨åˆ†

é¦–å…ˆæˆ‘ä»¬æ¥çœ‹æ ‡é¢˜éƒ¨åˆ†ï¼Œè¿™é‡Œæˆ‘ä»¬è®¾è®¡æ˜¯å®Œå…¨éµå¾ªåˆšåˆšçš„è§„åˆ™çš„ï¼Œæœ€å¤–å±‚æ˜¯CoordinatorLayoutï¼Œä¸­é—´æ˜¯AppBarLayoutï¼Œæœ€é‡Œå±‚æ˜¯CollapsingToolbarLayoutã€‚å¹¶ä¸”æˆ‘ä»¬åˆ¶å®šäº†AppBarLayoutçš„é«˜åº¦æ˜¯250dpï¼Œå› æ­¤åªæœ‰ä¸Šé¢çš„é‚£å°éƒ¨åˆ†æ˜¯è“è‰²çš„ã€‚

åœ¨CollapsingToolbarLayoutä¸­æœ‰å‡ ä¸ªå±æ€§éœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œåˆ†åˆ«æ˜¯

- contentScrimï¼šæŒ‡å®šCollapsingToolbarLayoutè¶‹äºæŠ˜å çŠ¶æ€çš„èƒŒæ™¯è‰²
- layout_scrollFlagsï¼šscrollè¡¨ç¤ºCollapsingToolbarLayoutä¼šéšç€**å†…å®¹éƒ¨åˆ†**æ»šåŠ¨ä¸€èµ·æ»šåŠ¨ï¼ŒexitUntilCollapsedè¡¨ç¤ºCollapsingToolbarLayoutå®ŒæˆæŠ˜å åä¿ç•™åœ¨æ­ç§˜é‚£ä¸Šï¼Œä¸ä¼šç§»å‡ºå±å¹•ã€‚

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/202210141841974.png#id=mLxdu&originHeight=1048&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

ç„¶ååœ¨CollapsingToolbarLayoutæ”¾ç½®ä¸€ä¸ªèƒŒæ™¯å›¾ç‰‡å’Œä¸€ä¸ªToolBarã€‚

è¿™é‡Œç”¨åˆ°äº†layout_collapseModeå±æ€§

- parallaxï¼šè¡¨ç¤ºæŠ˜å çš„è¿‡ç¨‹ä¸­äº§ç”Ÿä¸€å®šçš„é”™ä½åç§»
- pinï¼šè¡¨ç¤ºæŠ˜å çš„è¿‡ç¨‹ä¸­ä½ç½®å§‹ç»ˆä¿æŒä¸å˜

> æ³¨æ„è¿™é‡Œæ§ä»¶ä¸è¦é€‰é”™äº†å“¦ï¼Œæ˜¯androidx.appcompat.widget.Toolbar


![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/202210141957790.png#id=N82OV&originHeight=1048&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

## å†…å®¹éƒ¨åˆ†

å†…å®¹éƒ¨åˆ†å°±ç®€å•äº†ã€‚ç”±ä¸€ä¸ªNestedScrollViewåµŒå¥—ä¸€ä¸ªLinearLayoutï¼Œåœ¨LinearLayoutä¸­å­˜æ”¾æˆ‘ä»¬çš„å†…å®¹ã€‚

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/202210141857427.png#id=BFsC1&originHeight=1048&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

ä¸ºäº†ç¾åŒ–æ•ˆæœï¼Œåœ¨çº¿æ€§å¸ƒå±€ä¸­ï¼Œä½¿ç”¨MaterialCardViewï¼Œç„¶åæ”¾ç½®ä¸€ä¸ªæ–‡æœ¬æ§ä»¶æ˜¾ç¤ºå†…å®¹ã€‚

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/202210141902826.png#id=RZXyh&originHeight=1048&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

è‡³æ­¤å¸ƒå±€éƒ¨åˆ†ç¼–å†™å®Œæ¯•ã€‚

# 3.ä»£ç éƒ¨åˆ†

ä»£ç éƒ¨åˆ†æ¯”è¾ƒç®€å•ï¼Œåˆ†åˆ«è·å–å„ä¸ªæ§ä»¶çš„å®ä¾‹ï¼Œç„¶åè®¾ç½®å›¾ç‰‡èµ„æºï¼Œæ–‡æœ¬èµ„æºå³å¯ã€‚å®é™…å¼€å‘å½“ç„¶ä¸æ˜¯è¿™ä¹ˆç®€å•ç²—æš´ï¼Œè¿™äº›æ•°æ®åº”è¯¥ä»ä¸Šä¸€ä¸ªç•Œé¢è·å–ï¼Œæˆ–è€…ç½‘ç»œåŠ è½½è¯·æ±‚æ•°æ®ã€‚

é™¤æ­¤ä¹‹å¤–æˆ‘è¿˜é€šè¿‡setDisplayHomeAsUpEnabled()è®¾ç½®å·¦ä¸Šè§’çš„è¿”å›æŒ‰é’®æ˜¾ç¤ºã€‚å¹¶ç”¨onOptionsItemSelected()æ–¹æ³•ç›‘å¬è¿”å›äº‹ä»¶

```java
getSupportActionBar().setDisplayHomeAsUpEnabled(true);//æ˜¾ç¤ºandroid.R.id.home
```

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/202210142027461.gif#id=ZAoWp&originHeight=1031&originWidth=1918&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/202210142004296.png#id=HwGxq&originHeight=1048&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 4.å……åˆ†åˆ©ç”¨ç³»ç»ŸçŠ¶æ€æ 

**è®©èƒŒæ™¯å›¾å’Œç³»ç»ŸçŠ¶æ€æ èåˆï¼Œéœ€è¦å€ŸåŠ©Android:fitsSystemWindowsè¿™ä¸ªå±æ€§æ¥å®ç°ã€‚**

å°†æ§ä»¶çš„android:fitsSystemWindowså±æ€§æŒ‡å®šæˆtrueï¼Œå°±è¡¨ç¤ºè¯¥æ§ä»¶ä¼šå‡ºç°åœ¨ç³»ç»ŸçŠ¶æ€æ é‡Œã€‚ç°åœ¨æˆ‘ä»¬è¦è®©å›¾ç‰‡å‡ºç°åœ¨çŠ¶æ€æ é‡Œï¼Œé™¤äº†ç»™ImageViewè®¾ç½®Android:fitsSystemWindowså±æ€§ï¼Œå®ƒçš„æ‰€æœ‰çˆ¶æ§ä»¶å‡éœ€è¦è®¾ç½®ã€‚

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/202210142033350.png#id=YEqHX&originHeight=1048&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

é™¤æ­¤ä¹‹å¤–æˆ‘ä»¬è¿˜éœ€è¦å°†çŠ¶æ€æ è®¾ç½®ä¸ºé€æ˜çš„ã€‚

åœ¨themesæ–‡ä»¶ä¸­å®šä¹‰ä¸€æ¬¾ä¸»é¢˜æ ·å¼CollapseThemeï¼Œå®ƒç»§æ‰¿è‡ªAppThemeä¸­çš„æ‰€æœ‰ç‰¹æ€§ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ äº†çŠ¶æ€æ é¢œè‰²è®¾ç½®é€æ˜

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/202210142036131.png#id=h5Oh2&originHeight=1048&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

åœ¨AndroidManifest.xmlä¸­ä¸ºCollapseActivityä½¿ç”¨è¿™æ¬¾ä¸»é¢˜

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/202210142038770.png#id=qcwFN&originHeight=1048&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å†æ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œniceï¼ï¼ï¼

![](https://starry-lixu.oss-cn-hangzhou.aliyuncs.com/202210142040307.gif#id=TiHh5&originHeight=1031&originWidth=1918&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

# 5.å‚è€ƒèµ„æ–™

[Material Design å®æˆ˜ ä¹‹ ç¬¬å…­å¼¹ â€”â€” å¯æŠ˜å å¼æ ‡é¢˜æ (CollapsingToolbarLayout) & ç³»ç»Ÿå·®å¼‚å‹çš„åŠŸèƒ½å®ç°ï¼ˆå……åˆ†åˆ©ç”¨ç³»ç»ŸçŠ¶æ€æ ç©ºé—´ï¼‰ - ç®€ä¹¦ (jianshu.com)](https://www.jianshu.com/p/d27c18df2d51)

# 6.Giteeæºç 

[Android_Java_Review: å­¦ä¹ â€“ä»£ç å³ç¬”è®° (gitee.com)](https://gitee.com/starry_lixu/android_-java_-review)
